- name: accept software from packages.ros.org
  apt_repository:
    repo: 'deb http://packages.ros.org/ros/ubuntu {{ ansible_lsb.codename }} main'
    state: present
    filename: 'ros-latest'
- name: set up ros keys
  apt_key:
    keyserver: ha.pool.sks-keyservers.net
    id: '0xB01FA116'
    state: present
- name: update package sources
  apt:
    update_cache: yes
- name: install ros packages
  apt:
    name: ros-{{ ros_versions[ansible_lsb.codename] }}-{{ item }}
    state: present
  with_items: '{{ ros_packages }}'
